{% if template.name != "cart" %}
  <link rel="stylesheet" href="{{ 'cart-drawer.css' | asset_url }}" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="{{ 'main-cart-items.css' | asset_url }}" media="print" onload="this.media='all'">
  {% comment %}
  {{ 'cart-drawer.css' | asset_url | stylesheet_tag }}
  {{ 'main-cart-items.css' | asset_url | stylesheet_tag }}
  {% endcomment %}
  
  {% comment %}
    Renders cart drawer
  
    Usage:
    {% render 'cart-drawer' %}
  {% endcomment %}
  
  <script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>
  {% assign user_language = request.locale.iso_code %}
  {% capture minifyContent %}
  
  {% assign total_cart_compare = 0 %}
  {% assign total_cart_price = 0 %}
    
  <cart-drawer class="drawer{% if cart == empty %} is-empty{% endif %}">
    <div id="CartDrawer" class="cart-drawer">
      <div id="CartDrawer-Overlay" class="cart-drawer__overlay"></div>
      <div
        class="drawer__inner"
        role="dialog"
        aria-modal="true"
        aria-label="{{ 'sections.cart.title' | t }}"
        tabindex="-1"
      >
        {%- if cart == empty -%}
          <div class="drawer__inner-empty">
            <div class="cart-drawer__warnings center{% if settings.cart_drawer_collection != blank %} cart-drawer__warnings--has-collection{% endif %}">
              <div class="cart-drawer__empty-content">
                <div class="cart-drawer__empty-head">
                  <h2 class="cart__empty-text">{{ 'sections.cart.empty' | t }}</h2>
                  <button
                    class="drawer__close"
                    type="button"
                    onclick="this.closest('cart-drawer').close()"
                    aria-label="{{ 'accessibility.close' | t }}"
                  >
                    {% render 'icon-close' %}
                  </button>
                </div>
                <div class="cart-drawer__empty-warpper">
                <a href="{{ routes.all_products_collection_url }}" class="button">
                  {{ 'general.continue_shopping' | t }}
                </a>
  
                {%- if shop.customer_accounts_enabled and customer == null -%}
                  <p class="cart__login-title h3">{{ 'sections.cart.login.title' | t }}</p>
                  <p class="cart__login-paragraph">
                    {{ 'sections.cart.login.paragraph_html' | t: link: routes.account_login_url }}
                  </p>
                {%- endif -%}
                </div>
              </div>
            </div>
            {%- unless cart == empty -%}
            {%- if settings.cart_drawer_collection != blank -%}
              <div class="cart-drawer__collection">
                {% render 'card-collection', card_collection: settings.cart_drawer_collection, columns: 1 %}
              </div>
            {%- endif -%}
            {%- endunless -%}
          </div>
        {% else %}
          
          {%- if settings.cart_drawer__showIcons -%}
            {%- for i in (1..3) -%}
              {%- capture icon %}cart_drawer__icon_{{ i }}{% endcapture -%}
              {%- capture text %}cart_drawer__text_{{ i }}{% endcapture -%}
              {%- liquid
                 assign icon = settings[icon]
                 assign text = settings[text]
              -%}
              {% capture btnIcon %}{{ btnIcon }}
              
                {%- if icon != blank or text != blank -%}
                  <li class="cart__sales-point">
                    <span class="icon-and-text">{%- if icon != blank -%}{{ icon }}{%- endif -%}</span>
                    <span>{{ text }}</span>
                  </li>
                {%- endif -%}
              
              {% endcapture %}
            {%- endfor -%}
            {% assign btnIcon = btnIcon | strip_newlines | strip %}
            {% if btnIcon != blank %}
              <div class="cart__block--sales-point">
                <ul class="cart__sales-points list-unstyled">{{ btnIcon }}</ul>
              </div>
            {% endif %}
          {% endif %}
          
          <div class="drawer__header">
            <h2 class="drawer__heading">{{ 'sections.cart.title' | t }} {% if cart.item_count > 0 %}<span class="drawer-item-count">({{ cart.item_count }})</span>{% endif %}</h2>
            <button class="drawer__close" type="button" onclick="this.closest('cart-drawer').close()"
              aria-label="{{ 'accessibility.close' | t }}">
              {% render 'icon-close' %}
            </button>
          </div>
          
          {% if settings.cart_drawer_progress_bar_show and settings.cart_drawer_progress_threshold != blank %}
          <!-- progress-bar -->
          {% assign shipingThreshold = settings.cart_drawer_progress_threshold | plus: 0 %}
          {% assign cart_total = cart.total_price | divided_by: 100.00 %}
          {% assign precentage = cart_total | divided_by: shipingThreshold | times: 100 %}
          {% assign has_free_shipping = false %}
          {% assign upTofree = shipingThreshold | minus: cart_total | times: 100 %}
          {% if upTofree <= 0 %}
            {% assign has_free_shipping = true %}
          {% endif %}
          <div class="drawer-progressbar cartdrawer-desktop" data-shiping-threshold="{{ shipingThreshold }}">
            <div class="drawer-progressbar-text">
              {% if request.locale.iso_code == 'en' %}
                <p>{% if has_free_shipping %}ðŸŽ‰ You qualify forÂ <span>Free Shipping!</span>{% else %}{{ upTofree | money }} to <span>Free Shipping</span>{% endif %}</p>
              {% else %}
                <p>{% if has_free_shipping %}ðŸŽ‰Â¡Tiene derecho a <span>EnvÃ­o gratuito!</span>{% else %}{{ upTofree | money }} para <span>EnvÃ­o gratuito</span>{% endif %}</p>
              {% endif %}
              <div class="progress_shipping_icon">{%- render 'icon-shipping-box' -%}</div>
            </div>
            <div class="progress-container">
              <div class="progress-bar" id="progress-bar" style="width: {{ precentage }}%;"></div>
            </div>
          </div>
          {% endif %}      
        {%- endif -%}  
        
        <cart-drawer-items class="cart-drawer-main-product{% if cart == empty %} is-empty{% endif %}">
          <form
            action="{{ routes.cart_url }}"
            id="CartDrawer-Form"
            class="cart-main-product cart__contents cart-drawer__form"
            method="post"
          >
            {% comment %}
            <div class="common_h2 heading-cart-product"> 
              <h2 class="h2">Your Cart {% if cart.item_count > 0 %}<span class="drawer-item-count">({{ cart.item_count }})</span>{% endif %}</h2>            
              <button
                class="drawer__close"
                type="button"
                onclick="this.closest('cart-drawer').close()"
                aria-label="{{ 'accessibility.close' | t }}"
              >
                {% render 'icon-close' %}
              </button>
            </div>
            {% endcomment %}
            
            <div id="CartDrawer-CartItems" class="drawer__contents js-contents cart-main-product-inner">
              {%- if cart != empty -%}
                <div class="drawer__cart-items-wrapper cart-main-product-product cart-items" role="table">
                 {%- for item in cart.items -%}
                   {%- liquid
                      assign item_quantity = item.quantity
                   -%}
                  <div id="CartDrawer-Item-{{ item.index | plus: 1 }}" class="cart-product-product cart-item" role="row" data-key="{{ item.key }}">
                    <div class="cart-main-product-image-txt">
                      <div class="cart-product-image">
                        <div class="image">
                          {% if item.image %}
                            {% comment %} Leave empty space due to a:empty CSS display: none rule {% endcomment %}
                            <a href="{{ item.url }}" class="cart-item__link" tabindex="-1" aria-hidden="true"> </a>
                            <img
                              class="cart-item__image"
                              src="{{ item.image | image_url: width: 300 }}"
                              alt="{{ item.image.alt | escape }}"
                              loading="lazy"
                              width="150"
                              height="{{ 150 | divided_by: item.image.aspect_ratio | ceil }}"
                            >
                          {% endif %}
                        </div>
                      </div>
              
                      <div class="cart-product-text cart-dra-desk-txt">
                        <div class="cart-product-text-inner">
                          <div class="card-header">
                            <div class="card-header-wrapper">
                              {%- if settings.show_vendor -%}
                                <p class="caption-with-letter-spacing light">{{ item.product.vendor }}</p>
                              {%- endif -%}
    
                              <a href="{{ item.url }}" class="cart-item__name break header-wrap-title">
                                {{- item.product.title | escape -}}
                              </a>
                              {% if item.product.metafields.LucVincent.product_type != blank %}
                              <div class="header-wrap-para">
                                <p>{{ item.product.metafields.LucVincent.product_type }}</p>
                              </div>
                              {% endif %}
                            </div>
                            <cart-remove-button id="CartDrawer-Remove-{{ item.index | plus: 1 }}" data-index="{{ item.index | plus: 1 }}" class="close-icon-drawer small-hide">
                              <button type="button" class="button button--tertiary cart-remove-button cart-svg" aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">
                                  {% render 'icon-cross' %}
                              </button>
                            </cart-remove-button>
                          </div>
                          {%- liquid 
                             assign m_size = blank 
                             assign m_measure = blank 
                             for tag in item.product.tags 
                               if tag contains 'Size_' or tag contains 'size_' 
                                 assign m_size = tag | split: '_' | last 
                               endif 
                               if tag contains 'Measure_' or tag contains 'measure_'                       
                                 assign m_measure  = tag | split: '_' | last 
                               endif                       
                             endfor
                            -%}
                          {%- capture custom_size -%}{%- if m_size != blank -%}
                          <div class="product-option">
                            <dt>Size:</dt>
                            <dd>{{ m_size }}{% if m_measure != blank %} ({{ m_measure }}){% endif %}</dd>
                          </div>{%- endif -%}{%- endcapture -%}
                          
                          {%- if item.product.has_only_default_variant == false
                            or item.properties.size != 0
                            or item.selling_plan_allocation != null
                          -%}   
                            {% capture item_properties %}
                              {%- if item.product.has_only_default_variant == false -%}
                                {%- for option in item.options_with_values -%}
                                  <div class="product-option">
                                    <dt>{{ option.name }}:</dt>
                                    <dd>{{ option.value }}</dd>
                                  </div>
                                {%- endfor -%}
                              {%- endif -%}
    
                              {%- for property in item.properties -%}
                                {%- assign property_first_char = property.first | slice: 0 -%}
                                {%- if property.last != blank and property_first_char != '_' -%}
                                  <div class="product-option">
                                    <dt>{{ property.first }}:</dt>
                                    <dd>
                                      {%- if property.last contains '/uploads/' -%}
                                        <a href="{{ property.last }}" class="link" target="_blank">
                                          {{ property.last | split: '/' | last }}
                                        </a>
                                      {%- else -%}
                                        {{ property.last }}
                                      {%- endif -%}
                                    </dd>
                                  </div>
                                {%- endif -%}
                              {%- endfor -%}
                              {% endcapture %}
                            <dl>{{- custom_size -}}{%- if item.product.metafields.CW360SetInclude.setInclude_product -%}
                            {%- render 'pdp-offer', product: item.product, has_cart_item: true -%}
                          {%- endif -%}{{- item_properties | strip -}}</dl>
    
                            <p class="product-option hidden">{{ item.selling_plan_allocation.selling_plan.name }}</p>
                          {%- endif -%}
                          
                          {% if item.selling_plan_allocation != blank %}
                            {%- liquid
                               assign currentName = item.selling_plan_allocation.selling_plan.name
                               assign currentPlanID = item.selling_plan_allocation.selling_plan.id
                            -%}
                            <div class="dropdown-cart">
                              <div class="dropdown-cart-inner">
                                <div class="dropdown-cart-main" onclick="cartSubDropDown(event, this); return false;">
                                  <div class="dropdown-cart-txt-icon">
                                    <div class="dropdown-cart-text"data-selling-plan-id="{{ currentPlanID }}">
                                      <p>{{ currentName }}</p>
                                    </div>
                                    <div class="dropdown-cart-icon">{% render 'icon-chevron-down' %}</div>
                                  </div>
                                  <div class="dropdown-cart-container">
                                    <ul>
                                      <li disabled>Delivery Frequency:</li>
                                      {% for selling_plan_groups in item.product.selling_plan_groups %}
                                        {% for selling_plan in selling_plan_groups.selling_plans %}
                                          {%- liquid           
                                            assign name = selling_plan_groups.name         
                                            assign amount = 0 
                                            for selling_plan_option in selling_plan.options 
                                             assign name = selling_plan_option.value 
                                            endfor 
                                            for selling_plan_price_adjustment in selling_plan.price_adjustments           
                                             assign amount = selling_plan_price_adjustment.value 
                                            endfor 
                                            assign selling_plan_option = selling_plan.options 
                                            assign selling_plan_price_adjustment = selling_plan.price_adjustments 
                                             
                                            assign name = name | replace:'-',' ' 
                                            if user_language == 'fr' 
                                             assign name = name | replace:'month','mois' | replace:'Month','Mois' 
                                             assign name = name | replace:'year','annÃ©e' | replace:'Year','AnnÃ©e'
                                             assign name = name | replace:'week','semaine' | replace:'Week','Semaine'
                                             assign name = name | replace:'day','jour' | replace:'Day','Jour'           
                                            endif 
                                          -%}                                              
                                          <li data-value="{{ selling_plan.id }}" {% if currentPlanID == selling_plan.id %}selected{% endif %}
                                            data-discount="{{ amount }}">{% if user_language == 'fr' %}Livrer chaque{% else %}Deliver Every{% endif %} {{ name | capitalize }}</li>
                                        {% endfor %}
                                      {% endfor %}
                                      {% if item.product.requires_selling_plan == false %}
                                        <li data-one-time>{% if user_language == 'fr' %}Achat unique{% else %}One-Time Purchase{% endif %}</li>
                                      {% endif %}
                                    </ul>
                                  </div>
                                </div>
                              </div>
                            </div>
                          {% else %}                                
                            {% if item.product.selling_plan_groups.size > 0 %}
                              {%- liquid
                                 assign selling_plan_groups = item.product.selling_plan_groups[0]
                              -%}
                              {% if selling_plan_groups.selling_plans[0] != blank %}
                                {% for selling_plan in selling_plan_groups.selling_plans %}
                                  {%- liquid           
                                    assign name = selling_plan_groups.name         
                                    assign amount = 0 
                                    for selling_plan_option in selling_plan.options 
                                     assign name = selling_plan_option.value 
                                    endfor 
                                    for selling_plan_price_adjustment in selling_plan.price_adjustments           
                                     assign amount = selling_plan_price_adjustment.value 
                                    endfor                                   
                                  -%}
                              <div class="dropdown-cart dropdown-cart-one-time">
                                <div class="dropdown-cart-inner">
                                  <div class="dropdown-cart-main" onclick="cartSubDropDown(event, this); return false;" data-change-plan="true" data-value="{{ selling_plan.id }}">
                                    <div class="dropdown-cart-txt-icon">
                                      <div class="dropdown-cart-text"data-selling-plan-id="{{ selling_plan.id }}">
                                        <p>{% if user_language == 'fr' %}S'abonner et Ã©pargner {% else %}Subscribe & Save {% endif %}{{ amount }}%</p>
                                      </div>
                                      <div class="dropdown-cart-icon">{%- render 'icon-plus', type: 1 -%}</div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                                  {% endfor %}
                              {% endif %}
                            {% endif %}
                          {% endif %}
                          
                          {% capture cart_item_price %}
                          <div class="cart-price-product RRR">
                            <div class="price">
                            {% if item.selling_plan_allocation != blank %}
                              {%- liquid
                                 assign temp_com = item.selling_plan_allocation.compare_at_price | times: item_quantity
                                 assign temp_price = item.selling_plan_allocation.price | times: item_quantity
                                 assign total_cart_compare = total_cart_compare | plus: temp_com
                                 assign total_cart_price = total_cart_price | plus: temp_price
                              -%}
                              <div class="cart-item__discounted-prices">
                                <s class="price_no_active cart-item__old-price product-option">
                                  {{- item.selling_plan_allocation.compare_at_price | times: item_quantity | money -}}
                                </s>
                                <strong class="price_root cart-item__final-price product-option">
                                  {{ item.selling_plan_allocation.price | times: item_quantity | money }}
                                </strong>
                              </div>
                            {%- elsif item.original_price != item.final_price -%}
                              {%- liquid
                                 assign total_cart_compare = total_cart_compare | plus: item.original_price
                                 assign total_cart_price = total_cart_price | plus: item.final_price
                              -%}
                              <div class="cart-item__discounted-prices">
                                <span class="visually-hidden">
                                  {{ 'products.product.price.regular_price' | t }}
                                </span>
                                <s class="price_no_active cart-item__old-price product-option">
                                  {{- item.original_price | money -}}
                                </s>
                                <span class="visually-hidden">
                                  {{ 'products.product.price.sale_price' | t }}
                                </span>
                                <strong class="price_root cart-item__final-price product-option">
                                  {{ item.final_price | money }}
                                </strong>
                              </div>
                            {%- else -%}
                              {%- liquid
                                 assign total_cart_compare = total_cart_compare | plus: item.original_price
                                 assign total_cart_price = total_cart_price | plus: item.original_price
                              -%}
                              <div class="product-option price_root">
                                {{ item.original_price | money }}
                              </div>
                            {%- endif -%}                                          
                            </div>
                          </div>                            
                          {% endcapture %}
                          
                          {{ cart_item_price | replace:'RRR','large-up-hide medium-hide' }}
                        </div>
                        <div class="cart-button-price">                                
                          <quantity-input class="quantity cart-quantity cart-button">
                              <button class="cart-svg quantity__button no-js-hidden" name="minus" type="button">
                                  <span class="visually-hidden">
                                      {{- 'products.product.quantity.decrease' | t: product: item.product.title | escape -}}
                                    </span> {% render 'icon-cart-minus' %}
                              </button>
                              <input class="quantity__input cart-input" type="number" data-quantity-variant-id="{{ item.variant.id }}" name="updates[]" value="{{ item.quantity }}" {% # theme-check-disable %} data-cart-quantity="{{ cart | item_count_for_variant: item.variant.id }}"
                              min="{{ item.variant.quantity_rule.min }}" {% if item.variant.quantity_rule.max !=null %} max="{{ item.variant.quantity_rule.max }}" {% endif %} step="{{ item.variant.quantity_rule.increment }}" {% # theme-check-enable %} aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"
                              id="Drawer-quantity-{{ item.index | plus: 1 }}" data-index="{{ item.index | plus: 1 }}">
                              <button class="quantity__button no-js-hidden cart-svg" name="plus" type="button">
                                  <span class="visually-hidden">
                                      {{- 'products.product.quantity.increase' | t: product: item.product.title | escape -}}
                                    </span> {% render 'icon-cart-plus' %}
                              </button>
                          </quantity-input>
                          <div class="card-price-wrapper">                            
                            <div class="loading-overlay hidden">
                              <div class="loading-overlay__spinner">
                                <svg aria-hidden="true" focusable="false" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle></svg>
                              </div>
                            </div>
                            {{ cart_item_price | replace:'RRR','small-hide' }}
                            
                            <cart-remove-button id="CartDrawer-Remove-{{ item.index | plus: 1 }}-mobile" data-index="{{ item.index | plus: 1 }}" class="close-icon-drawer large-up-hide medium-hide">
                              <button type="button" class="button button--tertiary cart-remove-button cart-svg" aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">
                                  {% render 'icon-cross' %}
                              </button>
                            </cart-remove-button>
                          </div>
                        </div>
                      </div>
                      {% comment %}
                      <div class="cart-product-text cart-dra-mobile-txt">
                        <div class="cart-product-text-inner">
                          <div class="card-header">
                            <div class="card-header-wrapper">
                              {%- if settings.show_vendor -%}
                                <p class="caption-with-letter-spacing light">{{ item.product.vendor }}</p>
                              {%- endif -%}
    
                              <a href="{{ item.url }}" class="cart-item__name break header-wrap-title">
                                {{- item.product.title | escape -}}
                              </a>
                              {% if item.product.metafields.LucVincent.product_type != blank %}
                              <div class="header-wrap-para">
                                <p>{{ item.product.metafields.LucVincent.product_type }}</p>
                              </div>
                              {% endif %}
                            </div>
                            <div class="card-header-product-size">
                            
                              {%- liquid 
                               assign m_size = blank 
                               assign m_measure = blank 
                               for tag in item.product.tags 
                                 if tag contains 'Size_' or tag contains 'size_' 
                                   assign m_size = tag | split: '_' | last 
                                 endif 
                                 if tag contains 'Measure_' or tag contains 'measure_'                       
                                   assign m_measure  = tag | split: '_' | last 
                                 endif                       
                               endfor
                              -%}
                            </div>
                          </div>
                          {%- if item.product.has_only_default_variant == false
                            or item.properties.size != 0
                            or item.selling_plan_allocation != null
                          -%}   
                            {% capture item_properties %}
                              {%- if item.product.has_only_default_variant == false -%}
                                {%- for option in item.options_with_values -%}
                                  <div class="product-option">
                                    <dt>{{ option.name }}:</dt>
                                    <dd>{{ option.value }}</dd>
                                  </div>
                                {%- endfor -%}
                              {%- endif -%}
    
                              {%- for property in item.properties -%}
                                {%- assign property_first_char = property.first | slice: 0 -%}
                                {%- if property.last != blank and property_first_char != '_' -%}
                                  <div class="product-option">
                                    <dt>{{ property.first }}:</dt>
                                    <dd>
                                      {%- if property.last contains '/uploads/' -%}
                                        <a href="{{ property.last }}" class="link" target="_blank">
                                          {{ property.last | split: '/' | last }}
                                        </a>
                                      {%- else -%}
                                        {{ property.last }}
                                      {%- endif -%}
                                    </dd>
                                  </div>
                                {%- endif -%}
                              {%- endfor -%}
                              {% endcapture %}
                            <dl>{{- item_properties | strip -}}</dl>
    
                            <p class="product-option hidden">{{ item.selling_plan_allocation.selling_plan.name }}</p>
                          {%- endif -%}
                          
                          {% if item.selling_plan_allocation != blank %}
                            {%- liquid
                               assign currentName = item.selling_plan_allocation.selling_plan.name
                               assign currentPlanID = item.selling_plan_allocation.selling_plan.id
                            -%}
                            <div class="dropdown-cart">
                              <div class="dropdown-cart-inner">
                                <div class="dropdown-cart-main" onclick="cartSubDropDown(event, this); return false;">
                                  <div class="dropdown-cart-txt-icon">
                                    <div class="dropdown-cart-text"data-selling-plan-id="{{ currentPlanID }}">
                                      <p>{{ currentName }}</p>
                                    </div>
                                    <div class="dropdown-cart-icon">{% render 'icon-chevron-down' %}</div>
                                  </div>
                                  <div class="dropdown-cart-container">
                                    <ul>
                                      <li disabled>Delivery Frequency:</li>
                                      {% for selling_plan_groups in item.product.selling_plan_groups %}
                                        {% for selling_plan in selling_plan_groups.selling_plans %}
                                          {%- liquid           
                                            assign name = selling_plan_groups.name         
                                            assign amount = 0 
                                            for selling_plan_option in selling_plan.options 
                                             assign name = selling_plan_option.value 
                                            endfor 
                                            for selling_plan_price_adjustment in selling_plan.price_adjustments           
                                             assign amount = selling_plan_price_adjustment.value 
                                            endfor 
                                            assign selling_plan_option = selling_plan.options 
                                            assign selling_plan_price_adjustment = selling_plan.price_adjustments 
                                             
                                            assign name = name | replace:'-',' ' 
                                            if user_language == 'fr' 
                                             assign name = name | replace:'month','mois' | replace:'Month','Mois' 
                                             assign name = name | replace:'year','annÃ©e' | replace:'Year','AnnÃ©e'
                                             assign name = name | replace:'week','semaine' | replace:'Week','Semaine'
                                             assign name = name | replace:'day','jour' | replace:'Day','Jour'           
                                            endif 
                                          -%}                                              
                                          <li data-value="{{ selling_plan.id }}" {% if currentPlanID == selling_plan.id %}selected{% endif %}
                                            data-discount="{{ amount }}">{% if user_language == 'fr' %}Livrer chaque{% else %}Deliver Every{% endif %} {{ name | capitalize }}</li>
                                        {% endfor %}
                                      {% endfor %}
                                      {% if item.product.requires_selling_plan == false %}
                                        <li data-one-time>{% if user_language == 'fr' %}Achat unique{% else %}One-Time Purchase{% endif %}</li>
                                      {% endif %}
                                    </ul>
                                  </div>
                                </div>
                              </div>
                            </div>
                          {% else %}                                
                            {% if item.product.selling_plan_groups.size > 0 %}
                              {%- liquid
                                 assign selling_plan_groups = item.product.selling_plan_groups[0]
                              -%}
                              {% if selling_plan_groups.selling_plans[0] != blank %}
                                {% for selling_plan in selling_plan_groups.selling_plans %}
                                  {%- liquid           
                                    assign name = selling_plan_groups.name         
                                    assign amount = 0 
                                    for selling_plan_option in selling_plan.options 
                                     assign name = selling_plan_option.value 
                                    endfor 
                                    for selling_plan_price_adjustment in selling_plan.price_adjustments           
                                     assign amount = selling_plan_price_adjustment.value 
                                    endfor                                   
                                  -%}
                              <div class="dropdown-cart dropdown-cart-one-time">
                                <div class="dropdown-cart-inner">
                                  <div class="dropdown-cart-main" onclick="cartSubDropDown(event, this); return false;" data-change-plan="true" data-value="{{ selling_plan.id }}">
                                    <div class="dropdown-cart-txt-icon">
                                      <div class="dropdown-cart-text"data-selling-plan-id="{{ selling_plan.id }}">
                                        <p>{% if user_language == 'fr' %}S'abonner et Ã©pargner {% else %}Subscribe & Save {% endif %}{{ amount }}%</p>
                                      </div>
                                      <div class="dropdown-cart-icon">{%- render 'icon-plus', type: 1 -%}</div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                                  {% endfor %}
                              {% endif %}
                            {% endif %}
                          {% endif %}
                          
                          {{ cart_item_price | replace:'RRR','large-up-hide medium-hide' }}
                        </div>
                        <div class="card-price-wrapper">                            
                              <div class="loading-overlay hidden">
                                <div class="loading-overlay__spinner">
                                  <svg aria-hidden="true" focusable="false" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle></svg>
                                </div>
                              </div>
                              {% capture cart_item_price %}
                              <div class="cart-price-product RRR">
                                <div class="price">
                                {% if item.selling_plan_allocation != blank %}
                                  {%- liquid
                                     assign temp_com = item.selling_plan_allocation.compare_at_price | times: item_quantity
                                     assign temp_price = item.selling_plan_allocation.price | times: item_quantity
                                     assign total_cart_compare = total_cart_compare | plus: temp_com
                                     assign total_cart_price = total_cart_price | plus: temp_price
                                  -%}
                                  <div class="cart-item__discounted-prices">
                                    <s class="price_no_active cart-item__old-price product-option">
                                      {{- item.selling_plan_allocation.compare_at_price | times: item_quantity | money -}}
                                    </s>
                                    <strong class="price_root cart-item__final-price product-option">
                                      {{ item.selling_plan_allocation.price | times: item_quantity | money }}
                                    </strong>
                                  </div>
                                {%- elsif item.original_price != item.final_price -%}
                                  {%- liquid
                                     assign total_cart_compare = total_cart_compare | plus: item.original_price
                                     assign total_cart_price = total_cart_price | plus: item.final_price
                                  -%}
                                  <div class="cart-item__discounted-prices">
                                    <span class="visually-hidden">
                                      {{ 'products.product.price.regular_price' | t }}
                                    </span>
                                    <s class="price_no_active cart-item__old-price product-option">
                                      {{- item.original_price | money -}}
                                    </s>
                                    <span class="visually-hidden">
                                      {{ 'products.product.price.sale_price' | t }}
                                    </span>
                                    <strong class="price_root cart-item__final-price product-option">
                                      {{ item.final_price | money }}
                                    </strong>
                                  </div>
                                {%- else -%}
                                  {%- liquid
                                     assign total_cart_compare = total_cart_compare | plus: item.original_price
                                     assign total_cart_price = total_cart_price | plus: item.original_price
                                  -%}
                                  <div class="product-option price_root">
                                    {{ item.original_price | money }}
                                  </div>
                                {%- endif -%}                                          
                                </div>
                              </div>                            
                              {% endcapture %}
                              {{ cart_item_price | replace:'RRR','small-hide' }}
                            </div>
                        <div class="cart-button-price">                                
                          <quantity-input class="quantity cart-quantity cart-button">
                              <button class="cart-svg quantity__button no-js-hidden" name="minus" type="button">
                                  <span class="visually-hidden">
                                      {{- 'products.product.quantity.decrease' | t: product: item.product.title | escape -}}
                                    </span> {% render 'icon-cart-minus' %}
                              </button>
                              <input class="quantity__input cart-input" type="number" data-quantity-variant-id="{{ item.variant.id }}" name="updates[]" value="{{ item.quantity }}" {% # theme-check-disable %} data-cart-quantity="{{ cart | item_count_for_variant: item.variant.id }}"
                              min="{{ item.variant.quantity_rule.min }}" {% if item.variant.quantity_rule.max !=null %} max="{{ item.variant.quantity_rule.max }}" {% endif %} step="{{ item.variant.quantity_rule.increment }}" {% # theme-check-enable %} aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"
                              id="Drawer-quantity-{{ item.index | plus: 1 }}" data-index="{{ item.index | plus: 1 }}">
                              <button class="quantity__button no-js-hidden cart-svg" name="plus" type="button">
                                  <span class="visually-hidden">
                                      {{- 'products.product.quantity.increase' | t: product: item.product.title | escape -}}
                                    </span> {% render 'icon-cart-plus' %}
                              </button>
                          </quantity-input>
                           <div class="cart-remove">
                              <cart-remove-button id="CartDrawer-Remove-{{ item.index | plus: 1 }}" data-index="{{ item.index | plus: 1 }}" class="close-icon-drawer">
                                <button type="button" class="button button--tertiary cart-remove-button cart-svg" aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">
                                    {% render 'icon-cross' %}
                                </button>
                              </cart-remove-button>
                            </div>
                        </div>
                      </div>
                     {% endcomment %}
                    </div>
                  </div>
                 {% endfor %}
                </div>
              {%- endif -%}
              <p id="CartDrawer-LiveRegionText" class="visually-hidden" role="status"></p>
              <p id="CartDrawer-LineItemStatus" class="visually-hidden" aria-hidden="true" role="status">
                {{ 'accessibility.loading' | t }}
              </p>
            </div>
            <div id="CartDrawer-CartErrors" role="alert"></div>
          </form>
  
          {% if settings.cart_drawer_routine_show %}
            {% render 'cart-drawer-routine-pro' %}
          {% endif %}    
  
          {% if settings.switch_set_show and cart != empty %}
          {%- render 'switch-set-snippet' -%}
          {% endif %}
          
          {% if settings.cart_drawer_Recommend_show and cart != empty %}
          {%- render 'cart-drawer-recommend' -%}
          {% endif %}
        </cart-drawer-items>
  
        
  
        
        <div class="drawer__footer cart-checkout-box">
        
          <details id="Details-CartDrawer-disocunt" class="details__disocunt">
            <summary>
              <span class="summary__title">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17" fill="none" class="icon-coupon">
                  <path d="M12.0964 5.40356L12.0937 5.40089L12.0991 5.40625L12.0964 5.40356ZM12.0964 5.40356C12.7829 6.08725 13.8796 6.11358 14.5323 5.46086L16.5 7.42857L7.92857 16L5.96086 14.0323C6.61443 13.3787 6.58182 12.2854 5.89553 11.5991C5.20925 10.9128 4.11592 10.8802 3.46235 11.5338L1.5 9.57143L10.0714 1L12.0391 2.96771C11.3864 3.62043 11.4074 4.71177 12.0964 5.40356Z" stroke="#0D0D0D" stroke-opacity="0.3" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
                  Apply a discount code
                  <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12" fill="none">
                    <path class="plus" d="M1.5 6H10.5M6 1.5V10.5" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    <path class="mius" d="M1.5 6H10.5" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>                  
                  </svg>
              </span>
            </summary>
            <div class="limoniapps-discountninja-cartdiscountfield-placeholder"></div>
          </details>
          
          <div class="cart-checkout-main">
          {%- if settings.show_cart_note -%}
            <details id="Details-CartDrawer">
              <summary>
                <span class="summary__title">
                  {{ 'sections.cart.note' | t }}
                  {% render 'icon-caret' %}
                </span>
              </summary>
              <cart-note class="cart__note field">
                <label class="visually-hidden" for="CartDrawer-Note">{{ 'sections.cart.note' | t }}</label>
                <textarea
                  id="CartDrawer-Note"
                  class="text-area text-area--resize-vertical field__input"
                  name="note"
                  placeholder="{{ 'sections.cart.note' | t }}"
                >{{ cart.note }}</textarea>
              </cart-note>
            </details>
          {%- endif -%}
  
          <!-- Start blocks -->
          <!-- Subtotals -->
            
          {%- liquid
            assign total_cart_compare = total_cart_compare
            assign total_cart_price = total_cart_price
             assign hasSaving = false
             if total_cart_compare > total_cart_price and total_cart_compare != total_cart_price 
               assign hasSaving = true
             endif
  
            assign discont_amount = 0
            if cart.cart_level_discount_applications.size > 0           
            assign hasSaving = true 
              for discount in cart.cart_level_discount_applications 
               assign discont_amount = discont_amount | plus : discount.total_allocated_amount
              endfor
            endif 
          -%}
          <div class="cart-drawer__footer" {{ block.shopify_attributes }}>
            {% if has_free_shipping %}
            <div class="cart-total-saving">
              <div class="cart-total">
                <p class="cart-total-text">{% if user_language == 'fr' %}Livraison{% else %}Shipping{% endif %}</p>
                <p class="cart-total-price">{% if user_language == 'fr' %}Gratuit{% else %}Free{% endif %}</p>
              </div>
            </div>
            {% endif %}
            {% if hasSaving %}
              <div class="cart-total-saving">
             <div class="cart-total">
              <p class="cart-total-text">{% if user_language == 'fr' %}Panier Total{% else %}Cart Total{% endif %}</p>
              <p class="cart-total-price">{{ total_cart_compare | money }}</p>
             </div>
             <div class="cart-saving">
              <p class="cart-total-text">{% if user_language == 'fr' %}Votre Ã©pargne{% else %}Your Savings{% endif %}</p>
              <p class="cart-total-price">â€“ {{ total_cart_compare | minus: total_cart_price | plus: discont_amount | money }}</p>
             </div>
            </div>
            {% endif %}
            <div class="totals cart-subtotal-price" role="status">
              <div class="card-subtotal-txt totals__subtotal">
                {{ 'sections.cart.subtotal' | t }}
              </div>
              <p class="totals__subtotal-value">{{ cart.total_price | money }}</p>         
            </div>
            
            {%- if cart.cart_level_discount_applications.size > 0 -%}
              <ul class="discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                {%- for discount in cart.cart_level_discount_applications -%}
                  <li class="discounts__discount discounts__discount--end">
                    {%- render 'icon-discount' -%}
                    {{ discount.title }}
                    (-{{ discount.total_allocated_amount | money }})
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}

            {% comment %}
            <small class="tax-note caption-large card-subtotal-txt detail">
              <p>
              {%- if cart.taxes_included and shop.shipping_policy.body != blank -%}
                {{ 'sections.cart.taxes_included_and_shipping_policy_html' | t: link: shop.shipping_policy.url }}
              {%- elsif cart.taxes_included -%}
                {{ 'sections.cart.taxes_included_but_shipping_at_checkout' | t }}
              {%- elsif shop.shipping_policy.body != blank -%}
                {{ 'sections.cart.taxes_and_shipping_policy_at_checkout_html' | t: link: shop.shipping_policy.url }}
              {%- else -%}
                {{ 'sections.cart.taxes_and_shipping_at_checkout' | t }}
              {%- endif -%}
              </p>
            </small>
            {% endcomment %}
          </div>
  
          <!-- CTAs -->
          <div class="cart__ctas" {{ block.shopify_attributes }}>
            <noscript>
              <button type="submit" class="cart__update-button button button--secondary" form="CartDrawer-Form">
                {{ 'sections.cart.update' | t }}
              </button>
            </noscript>
  
            <button
              type="submit"
              id="CartDrawer-Checkout"
              class="cart__checkout-button button"
              name="checkout"
              form="CartDrawer-Form"
              {% if cart == empty %}
                disabled
              {% endif %}
            >
              {{ 'sections.cart.checkout' | t }}
            </button>
          </div>
          </div>
        </div>
        
      </div>
    </div>
          </cart-drawer>
  
    
  {% endcapture -%}
  {{- minifyContent | strip_newlines | replace: '   ', ' ' | replace: '  ', ' ' | replace: '  ', ' ' }}
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      function isIE() {
        const ua = window.navigator.userAgent;
        const msie = ua.indexOf('MSIE ');
        const trident = ua.indexOf('Trident/');
  
        return msie > 0 || trident > 0;
      }
  
      if (!isIE()) return;
      const cartSubmitInput = document.createElement('input');
      cartSubmitInput.setAttribute('name', 'checkout');
      cartSubmitInput.setAttribute('type', 'hidden');
      document.querySelector('#cart').appendChild(cartSubmitInput);
      document.querySelector('#checkout').addEventListener('click', function (event) {
        document.querySelector('#cart').submit();
      });
    });
  </script>
  {% endif %}